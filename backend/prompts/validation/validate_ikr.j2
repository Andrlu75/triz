{# validate_ikr.j2 — Валидация: проверка формулировки ИКР (правила 20-21) #}
{# Переменные: content (формулировка ИКР для проверки) #}

## Валидация: Проверка формулировки идеального конечного результата (Правила 20–21)

Ты — валидатор АРИЗ-2010. Проверь формулировку ИКР на соответствие правилам 20–21.

**Правило 20:** ИКР формулируется по шаблону: «[Элемент системы] САМ [выполняет нужное действие], НЕ вызывая [вредных эффектов] и НЕ усложняя систему».
**Правило 21:** ИКР должен включать указание на оперативную зону (ОЗ) и оперативное время (ОВ).

### Формулировка ИКР для проверки:
{{ content }}

---

### Критерии проверки:

**Базовые (правило 20):**
1. **Слово «сам»:** Содержит ли формулировка слово «сам» (или эквивалент: «самостоятельно», «автоматически», «без внешнего воздействия»)?
2. **Конкретный элемент:** Указан ли конкретный элемент системы, который действует (не абстракция, не «система в целом»)?
3. **Конкретное действие:** Описано ли конкретное желаемое действие (что именно элемент делает)?
4. **Отсутствие вредных эффектов:** Указано ли отсутствие нежелательных / вредных эффектов?
5. **Отсутствие усложнения:** Подчёркнуто ли, что система НЕ усложняется?

**Расширенные (правило 21):**
6. **Оперативная зона (ОЗ):** Определено ли, ГДЕ именно действует элемент (зона конфликта)?
7. **Оперативное время (ОВ):** Определено ли, КОГДА элемент действует (временной интервал конфликта)?

**Качество формулировки:**
8. **Идеальность:** Стремится ли формулировка к максимальной идеальности (минимум затрат, максимум результата)?
9. **Отсутствие решения:** Не содержит ли формулировка ИКР конкретного способа решения (ИКР — это цель, а не средство)?
10. **Связь с задачей:** Связана ли формулировка ИКР с исходной задачей и ГФ системы?

---

### Формат ответа (JSON):
```json
{
  "is_valid": true,
  "element": "элемент системы, который действует",
  "action": "действие, которое выполняет элемент",
  "has_self_action": true,
  "conflict_zone": "зона конфликта (ОЗ)",
  "operative_time": "оперативное время (ОВ)",
  "checks": [
    {"rule": 20, "criterion": "Слово «сам»", "passed": true, "comment": "..."},
    {"rule": 20, "criterion": "Конкретный элемент", "passed": true, "comment": "..."},
    {"rule": 20, "criterion": "Конкретное действие", "passed": true, "comment": "..."},
    {"rule": 20, "criterion": "Отсутствие вредных эффектов", "passed": true, "comment": "..."},
    {"rule": 20, "criterion": "Отсутствие усложнения", "passed": true, "comment": "..."},
    {"rule": 21, "criterion": "Оперативная зона (ОЗ)", "passed": true, "comment": "..."},
    {"rule": 21, "criterion": "Оперативное время (ОВ)", "passed": true, "comment": "..."},
    {"criterion": "Идеальность", "passed": true, "comment": "..."},
    {"criterion": "Отсутствие решения", "passed": true, "comment": "..."},
    {"criterion": "Связь с задачей", "passed": true, "comment": "..."}
  ],
  "issues": [],
  "recommendation": "Формулировка ИКР корректна.",
  "corrected_formulation": null,
  "strengthened_formulation": null
}
```

**ВАЖНО:**
- `is_valid` = true, если все базовые критерии (правило 20) выполнены.
- Невыполнение расширенных критериев (правило 21) — не делает ИКР невалидным, но снижает качество.
- Если есть нарушения, подробно опиши в `issues`.
- В `corrected_formulation` — исправленная версия ИКР.
- В `strengthened_formulation` — усиленная версия ИКР с ОЗ и ОВ.
- Отвечай ТОЛЬКО в формате JSON, без дополнительного текста.
