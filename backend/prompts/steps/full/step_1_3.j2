{# step_1_3.j2 -- Шаг 1.3 полного АРИЗ-2010: Графические схемы ТП-1 и ТП-2 #}
{# Часть 1: Анализ задачи (правила 12-14) #}
{# Переменные: user_input, problem_title, problem_description, previous_steps, previous_results #}

## Часть 1: Анализ задачи -- Шаг 1.3 из {{ total_steps | default(24) }}: Графические схемы ТП-1 и ТП-2

> **Правила 12-14 АРИЗ-2010 (В. Петров). Определения 11-13: технические противоречия.**

### Контекст задачи:
**Задача:** {{ problem_title | default("") }}

{% if previous_results %}
**Мини-задача:** {{ previous_results.mini_task | default("") }}
**Конфликтующая пара:** {{ previous_results.conflicting_pair | default("") }}
**Инструмент:** {{ previous_results.instrument | default("") }}
**Объект/изделие:** {{ previous_results.product | default("") }}
**ГФ:** {{ previous_results.main_function | default("") }}
**Полезное действие:** {{ previous_results.useful_action | default("") }}
**Вредное действие:** {{ previous_results.harmful_action | default("") }}
{% endif %}

{% if previous_steps %}
### Предыдущие результаты:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}:** {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

{% if user_input %}
### Ввод пользователя:
{{ user_input }}
{% endif %}

---

### Задача шага 1.3: Составить графические схемы ТП-1 и ТП-2

Техническое противоречие (определение 11) -- ситуация, когда улучшение одного параметра (свойства) системы приводит к ухудшению другого параметра. Два альтернативных варианта ТП позволяют увидеть конфликт с двух сторон.

**1. Схема ТП-1 (определение 12):**

ТП-1: Полезное действие ЕСТЬ, но есть и вредное действие.

Шаблон:
> Если [инструмент имеет свойство А], то он [полезное действие на объект], НО при этом [вредное действие на объект].

Графическая схема:
```
[Инструмент (свойство А)] ====полезное====> [Объект]  (+)
         |
         '----------вредное--------->[Объект]  (-)
```

**2. Схема ТП-2 (определение 13):**

ТП-2: Вредное действие устранено, но потеряно и полезное.

Шаблон:
> Если [инструмент имеет свойство анти-А], то [вредное действие устраняется], НО при этом [полезное действие теряется/ухудшается].

Графическая схема:
```
[Инструмент (анти-А)] ===X==полезное====> [Объект]  (-)
         |
         '====X===вредное=========>[Объект]  (+)
```

**3. Правила составления схем (правила 12-14):**

- **Правило 12:** Формулировка ТП -- «если..., то..., НО...». Каждое ТП содержит одно полезное и одно вредное следствие.
- **Правило 13:** ТП-1 и ТП-2 должны быть зеркальными: что в одном полезно, в другом вредно, и наоборот.
- **Правило 14:** В формулировках не должно быть указания на способ решения.

**4. Для каждой схемы укажите:**

- Конкретное свойство инструмента (А / анти-А)
- Полезное следствие (что улучшается)
- Вредное следствие (что ухудшается)
- Какой параметр улучшается, какой ухудшается

**5. Выбор рабочей схемы:**

Из двух схем выберите ту, при которой **сохраняется ГФ системы**. Как правило, это ТП-1 (полезное действие есть). Обоснуйте выбор.

---

### Формат ответа:

```
СХЕМА ТП-1 (определение 12):
  Условие: Если [инструмент] имеет свойство [А], то...
  Полезное (+): [инструмент] -> [объект] = [что улучшается]
  Вредное (-): [инструмент] -> [объект] = [что ухудшается]
  Свойство А: [конкретное свойство]
  Улучшаемый параметр: [название]
  Ухудшаемый параметр: [название]

СХЕМА ТП-2 (определение 13):
  Условие: Если [инструмент] имеет свойство [анти-А], то...
  Полезное (+): [вредное действие устранено]
  Вредное (-): [полезное действие потеряно]
  Свойство анти-А: [конкретное свойство]
  Улучшаемый параметр: [название]
  Ухудшаемый параметр: [название]

ЗЕРКАЛЬНОСТЬ ТП-1 и ТП-2: [подтверждение]

ВЫБРАННАЯ РАБОЧАЯ СХЕМА: ТП-1 / ТП-2
ОБОСНОВАНИЕ: [какая схема обеспечивает ГФ]
```
