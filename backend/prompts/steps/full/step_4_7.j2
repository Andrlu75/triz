{# step_4_7.j2 — Full ARIZ Part 4, Step 4.7: Apply MMCh method for solution visualization #}
{# Variables: user_input, problem_title, problem_description, previous_steps, previous_results #}

## Часть 4 — Оценка и развитие решения. Шаг 4.7: Метод ММЧ для визуализации решения

### Контекст:
**Задача:** {{ problem_title | default("") }}

{% if previous_results %}
**Техническое решение:** {{ previous_results.technical_solution | default("") }}
**Применённые эффекты (шаг 4.6):** {{ previous_results.effects_applied | default("") }}
**Приёмы (шаг 4.5):** {{ previous_results.principles_applied | default("") }}
{% endif %}

{% if previous_steps %}
### Предыдущие результаты:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}:** {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

### Ввод пользователя:
{{ user_input | default("") }}

---

### Инструкция:

**Шаг 4.7** — применить метод ММЧ для визуализации и проверки найденного решения.

**1. Модель решения через ММЧ:**
Представь оперативную зону с найденным решением:
- Как ведут себя ММЧ после применения решения?
- Обеспечивается ли одновременно S и анти-S?
- Нет ли конфликтов в новой конфигурации?

**2. Проверка целостности:**
- Все ли ММЧ «довольны»? Нет ли группы, которой решение вредит?
- Не появились ли новые конфликты?
- Устойчива ли модель?

**3. Оптимизация:**
- Можно ли упростить модель?
- Можно ли уменьшить количество задействованных ресурсов?

### Формат ответа:
```
МОДЕЛЬ РЕШЕНИЯ (ММЧ):
  Поведение ММЧ: ...
  S обеспечивается: ДА/НЕТ — как: ...
  анти-S обеспечивается: ДА/НЕТ — как: ...

ПРОВЕРКА:
  Новые конфликты: ...
  Устойчивость: ...

ОПТИМИЗАЦИЯ: ...
```
