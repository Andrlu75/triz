{# step_4_4.j2 — Full ARIZ Part 4, Step 4.4: Use analog tasks from knowledge base #}
{# Variables: user_input, problem_title, problem_description, previous_steps, previous_results #}

## Часть 4 — Оценка и развитие решения. Шаг 4.4: Задачи-аналоги из базы знаний

### Контекст:
**Задача:** {{ problem_title | default("") }}

{% if previous_results %}
**Техническое решение:** {{ previous_results.technical_solution | default("") }}
**ФП:** {{ previous_results.macro_fp | default("") }}
{% endif %}

{% if previous_steps %}
### Предыдущие результаты:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}:** {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

### Ввод пользователя:
{{ user_input | default("") }}

---

### Инструкция:

**Шаг 4.4** — использовать задачи-аналоги из базы знаний ТРИЗ (Глава 6 Петрова и расширения).

**1. Поиск аналогов по ФП:**
- Какие задачи из базы знаний имеют аналогичное физическое противоречие?
- Какие принципы разрешения были использованы в аналогах?

**2. Перенос решения:**
- Можно ли адаптировать решение-аналог?
- Какие модификации нужны?

**3. Обогащение решения:**
- Можно ли комбинировать несколько подходов из аналогов?
- Какие новые идеи дают аналоги?

### Формат ответа:
```
ЗАДАЧИ-АНАЛОГИ:
  1. [Задача] — [ФП] — [Решение] — [Область]
  2. [Задача] — [ФП] — [Решение] — [Область]

ПЕРЕНОС РЕШЕНИЯ: ...
МОДИФИКАЦИИ: ...
НОВЫЕ ИДЕИ: ...
```
