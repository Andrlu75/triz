{# step_4_1.j2 -- Шаг 4.1 полного АРИЗ-2010: Метод ММЧ #}
{# Часть 4: Получение решения (правило 26) #}
{# Переменные: user_input, problem_title, problem_description, previous_steps, previous_results #}
{# Переменные базы знаний: knowledge_base.analog_tasks #}

## Часть 4: Получение решения -- Шаг 4.1 из {{ total_steps | default(24) }}: Метод ММЧ

> **Правило 26 АРИЗ-2010 (В. Петров). Определение 30: Метод моделирования маленькими человечками (ММЧ).**

### Контекст задачи:
**Задача:** {{ problem_title | default("") }}

{% if previous_results %}
**ФП макро:** {{ previous_results.fp_macro | default("") }}
**ФП микро:** {{ previous_results.fp_micro | default("") }}
**Свойство S:** {{ previous_results.property_s | default("") }}
**Анти-свойство:** {{ previous_results.anti_property_s | default("") }}
**ИКР-2:** {{ previous_results.ikr_2 | default("") }}
**ОЗ:** {{ previous_results.operative_zone | default("") }}
**ОВ:** {{ previous_results.operative_time | default("") }}
**ВПР:** {{ previous_results.vpr_list | default("") }}
**Перспективные принципы разделения:** {{ previous_results.fp_resolution_check | default("") }}
{% endif %}

{% if previous_steps %}
### Предыдущие результаты:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}:** {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

{% if user_input %}
### Ввод пользователя:
{{ user_input }}
{% endif %}

{% if knowledge_base and knowledge_base.analog_tasks %}
### Задачи-аналоги из базы знаний ТРИЗ:
{% for analog in knowledge_base.analog_tasks %}
- **{{ analog.title }}** ({{ analog.domain }}): {{ analog.problem }}
  ОП: {{ analog.op_formulation }}
  Решение: {{ analog.solution }}
{% endfor %}
{% endif %}

---

### Задача шага 4.1: Применить метод ММЧ (моделирование маленькими человечками)

Метод ММЧ (определение 30) -- мысленный эксперимент, при котором вещество в ОЗ заменяется толпой маленьких человечков. Каждый человечек -- элемент микроструктуры. ММЧ позволяет визуализировать конфликт и найти его разрешение, преодолевая психологическую инерцию.

**1. Модель «КАК ЕСТЬ» (текущая ситуация -- конфликт):**

Представьте, что ОЗ заполнена маленькими человечками (ММЧ). Опишите:
- Как расположены ММЧ в ОЗ? (стоят плотно, рыхло, рядами, хаотично)
- Что они делают? (стоят, двигаются, держатся за руки, толкаются)
- Какие ММЧ обеспечивают свойство S? (что они делают для этого)
- Какие ММЧ вызывают вредный эффект? (что происходит одновременно)
- В чём конфликт между группами ММЧ?

**2. Модель «КАК НУЖНО» (ИКР-2):**

Представьте идеальную ситуацию (ИКР-2 выполняется):
- Как теперь расположены ММЧ?
- Что они делают по-другому?
- Как одновременно обеспечивается S и анти-S?
- Какие «группы» ММЧ можно выделить?
- Как группы взаимодействуют?

**3. Анализ перехода от «КАК ЕСТЬ» к «КАК НУЖНО»:**

- Что должно измениться в поведении ММЧ?
- Какие ММЧ должны изменить своё поведение?
- Нужно ли добавить новых ММЧ или убрать существующих?
- Какой физический процесс описывает эти изменения?

**4. Интерпретация модели ММЧ:**

Переведите модель ММЧ обратно на язык физики:
- Какому физическому явлению соответствует поведение ММЧ в модели «КАК НУЖНО»?
- Какие вещества или поля могут обеспечить такое поведение?
- Как это связано с выявленными ВПР?

**5. Предварительные идеи решения:**

На основе модели ММЧ сформулируйте 1-2 предварительные идеи решения.

---

### Формат ответа:

```
МОДЕЛЬ ММЧ -- «КАК ЕСТЬ» (конфликт):
  Расположение ММЧ: [описание]
  Поведение ММЧ для S: [что делают]
  Вредный эффект: [что происходит]
  Конфликт между группами: [описание]

МОДЕЛЬ ММЧ -- «КАК НУЖНО» (ИКР-2):
  Расположение ММЧ: [описание]
  Новое поведение: [что делают]
  Как обеспечивается S: [описание]
  Как обеспечивается анти-S: [описание]
  Группы ММЧ: [описание]

ПЕРЕХОД:
  Изменения в поведении: [что меняется]
  Новые/убранные ММЧ: [нужно ли]
  Физический процесс: [какому явлению соответствует]

ИНТЕРПРЕТАЦИЯ:
  Физическое явление: [название]
  Необходимые вещества/поля: [перечень]
  Связь с ВПР: [какие ВПР задействованы]

ПРЕДВАРИТЕЛЬНЫЕ ИДЕИ:
  Идея 1: [описание]
  Идея 2: [описание]
```
