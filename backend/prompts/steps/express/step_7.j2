{# step_7.j2 — Шаг 7 Краткого АРИЗ: Решение #}
{# Переменные: user_input, problem_title, problem_description, previous_steps, previous_results #}

## Шаг 7 из 7: Решение

### Полный контекст задачи:
**Задача:** {{ problem_title | default("") }}

{% if previous_results %}
**Формулировка задачи:** {{ previous_results.task_formulation | default("") }}
**Главная функция:** {{ previous_results.main_function | default("") }}
**Инструмент:** {{ previous_results.instrument | default("") }}
**Объект:** {{ previous_results.object | default("") }}
**ПП:** {{ previous_results.surface_contradiction | default("") }}
**УП-1:** {{ previous_results.deepened_contradiction | default("") }}
**УП-2:** {{ previous_results.deepened_contradiction_2 | default("") }}
**ИКР:** {{ previous_results.ikr | default("") }}
**Усиленный ИКР:** {{ previous_results.strengthened_ikr | default("") }}
**ОП:** {{ previous_results.sharpened_contradiction | default("") }}
**Свойство S:** {{ previous_results.property_s | default("") }}
**Анти-свойство (анти-S):** {{ previous_results.anti_property_s | default("") }}
**Оперативная зона (ОЗ):** {{ previous_results.operative_zone | default("") }}
**Оперативное время (ОВ):** {{ previous_results.operative_time | default("") }}
**Доступные ВПР:** {{ previous_results.vpr | default("") }}
**Направления разрешения ОП:** {{ previous_results.op_directions | default("") }}
{% endif %}

{% if previous_steps %}
### Все предыдущие шаги:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}** ({{ step.title }}): {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

{% if user_input %}
### Дополнительный ввод пользователя:
{{ user_input }}
{% endif %}

---

### Твоя задача на этом шаге:

Это финальный шаг. На основании всего проведённого анализа (шаги 1-6) предложи конкретные решения задачи и проверь их качество (правила 26-28).

**1. Генерация решений**

Предложи **2-3 конкретных решения**. Каждое решение должно:
- Разрешать обострённое противоречие (ОП) — обеспечивать и свойство S, и анти-S.
- Соответствовать ИКР (или максимально приближаться к нему).
- Использовать один из 4 принципов разделения (правило 25).
- По возможности задействовать уже имеющиеся ВПР (правило 26).

**2. Привязка к инструментам ТРИЗ**

Для каждого решения укажи, какой инструмент ТРИЗ лежит в его основе:
- **Приём устранения ТП** (из 50 приёмов Альтшуллера) — укажи номер и название. Примеры: 1-Дробление, 2-Вынесение, 3-Местное качество, 5-Объединение, 7-«Матрёшка», 10-Предварительное действие, 13-«Наоборот», 15-Динамичность, 22-«Обратить вред в пользу», 24-Посредник, 25-Самообслуживание, 28-Замена механической схемы, 35-Изменение физико-химических параметров, 36-Фазовые переходы.
- **Стандартное решение** (из 76 стандартов) — укажи класс и номер. Пример: «Стандарт 1.1.1 — достройка неполного веполя».
- **Физический / химический / биологический / геометрический эффект** — укажи конкретный эффект. Примеры: тепловое расширение, капиллярность, осмос, фазовый переход, электростатика.
- **Аналогия** — если решение основано на аналогии из другой области (задача-аналог).

**3. Оценка решений**

Для каждого решения оцени по 10-балльной шкале:
- **Новизна** (1-10): насколько решение нестандартное, неочевидное. 1 = очевидное, 10 = принципиально новый подход.
- **Реализуемость** (1-10): насколько легко внедрить на практике с учётом доступных ресурсов. 1 = требует прорывных технологий, 10 = можно сделать прямо сейчас.
- **Идеальность** (1-10): насколько близко к ИКР. 1 = далеко от идеала, 10 = практически ИКР.
- **Надёжность** (1-10): насколько решение устойчиво и предсказуемо. 1 = непредсказуемо, 10 = гарантированно работает.

**4. Проверка лучшего решения (правило 27)**

Для решения с наивысшим общим баллом проверь:
- Не усложняет ли оно систему (добавляет ли новые элементы)?
- Не создаёт ли новых противоречий (если да — указать, какие)?
- Использует ли оно уже имеющиеся ВПР (или требует привлечения новых)?
- Приближает ли оно систему к ИКР?
- Каковы условия реализации и возможные побочные эффекты?
- Если решение порождает новые противоречия — указать, что для них можно провести повторный АРИЗ.

**5. Обобщение опыта (правило 28)**

- Какое противоречие было ключевым?
- Каким приёмом/стандартом/эффектом оно устранено?
- Можно ли обобщить решение для класса аналогичных задач?
- В каких ещё областях может быть применён найденный принцип?
- Сформулируй задачу-аналог для базы знаний.

**6. Итоговая рекомендация**

Отранжируй решения от лучшего к худшему. Дай конкретную рекомендацию: какое решение реализовать в первую очередь и почему.

---

### Формат ответа:

Для каждого решения используй структуру:

```
### Решение 1: [Краткое название]
  Описание: [подробное описание — как именно решается задача]
  Метод ТРИЗ: [приём N — название / стандарт X.Y / эффект]
  Принцип разделения: [пространство / время / структура / системный переход]
  Задействованные ВПР: ...
  Новизна: X/10
  Реализуемость: Y/10
  Идеальность: Z/10
  Надёжность: W/10
  Общий балл: (X+Y+Z+W)/4

### Решение 2: [Краткое название]
  ...

### Решение 3: [Краткое название]
  ...

ПРОВЕРКА ЛУЧШЕГО РЕШЕНИЯ (решение N):
  Не усложняет систему: ДА/НЕТ — ...
  Нет новых противоречий: ДА/НЕТ — ...
  Использует ВПР: ДА/НЕТ — ...
  Приближает к ИКР: ДА/НЕТ — ...
  Побочные эффекты: ...

ОБОБЩЕНИЕ:
  Ключевое противоречие: ...
  Использованный инструмент: ...
  Задача-аналог: ...
  Области переноса: ...

РЕКОМЕНДАЦИЯ: Реализовать решение N в первую очередь, потому что ...
```
