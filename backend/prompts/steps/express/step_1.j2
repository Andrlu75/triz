{# step_1.j2 — Шаг 1 Краткого АРИЗ: Формулировка задачи и проверка на ложность #}
{# Переменные: user_input, problem_title, problem_description, domain, previous_steps, previous_results #}

## Шаг 1 из 7: Формулировка задачи

### Название задачи:
{{ problem_title | default("Не указано") }}

### Описание проблемы от пользователя:
{{ problem_description | default("Не указано") }}

{% if user_input %}
### Дополнительный ввод пользователя:
{{ user_input }}
{% endif %}

{% if domain %}
### Предметная область: {{ domain }}
{% endif %}

{% if previous_steps %}
### Предыдущие результаты:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}** ({{ step.title }}): {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

---

### Твоя задача на этом шаге:

**1. Анализ описания проблемы**

Внимательно прочитай описание. Выдели ключевые элементы:
- **Техническая система (ТС):** что именно является предметом задачи, из каких элементов состоит.
- **Инструмент:** какой элемент системы выполняет главную функцию (воздействует на объект). Инструмент — это тот элемент, изменение которого позволяет устранить конфликт (правило 6).
- **Объект (изделие):** на что направлено воздействие, что нужно изменить/обработать. Объект нельзя менять (правило 11).
- **Среда:** в каких условиях работает система (температура, давление, материалы, ограничения).
- **Нежелательный эффект (НЭ):** что именно не устраивает в текущей работе системы.

**2. Проверка на ложность задачи (5 пунктов)**

Проверь, не является ли задача ложной. Для каждого пункта дай ответ ДА/НЕТ с обоснованием:

1. **Обходной путь:** Можно ли достичь цели, вообще не решая указанную проблему? Есть ли альтернативный подход?
2. **Устарелость:** Не решена ли задача уже кем-то? Существует ли готовое решение, технология или продукт?
3. **Глубинная причина:** Не является ли задача следствием другой, более глубокой проблемы? Если да — какова корневая причина?
4. **Подмена средством:** Не подменяется ли реальная потребность конкретным техническим средством? (Нужно «осветить помещение», а не «улучшить лампу».)
5. **Нулевое решение:** Можно ли устранить причину проблемы, сделав задачу ненужной?

**Если хотя бы один пункт даёт ДА** — задача может быть ложной. Предложи переформулировку.

**3. Определение главной функции (ГФ) — правила 4-11**

Сформулируй ГФ системы строго по шаблону:
- «[Инструмент] [глагол] [объект]»
- Формулировка должна быть конкретной (правило 8), описывать одно действие (правило 9).
- Не подменяй функцию средством (правило 7): «что нужно сделать», а не «как сделать».
- Формулировка не должна предопределять способ решения (правило 11).

**4. Замена специальных терминов (правило 15)**

Замени все специальные (отраслевые, профессиональные) термины простыми общепонятными словами. Цель — снижение психологической инерции и расширение поля поиска.

Примеры:
- «сепаратор» → «устройство, разделяющее смесь»
- «фильтр» → «перегородка с отверстиями»
- «конвейер» → «лента, перемещающая предметы»
- «теплообменник» → «устройство, передающее тепло от одного потока к другому»

**5. Формулировка мини-задачи (правила 1-3)**

Запиши итоговую формулировку мини-задачи по шаблону:

> **Мини-задача:** Техническая система для [ГФ] включает [элементы]. Нежелательный эффект: [НЭ]. Необходимо при минимальных изменениях в системе устранить НЭ, сохранив способность системы выполнять ГФ.

Требования:
- Всё в системе остаётся без изменений или упрощается (правило 3).
- Указано, что нужно изменить и что нельзя ухудшить (правило 2).
- Формулировка не меняется в процессе решения (правило 1).

---

### Формат ответа:

Структурируй ответ по пунктам 1-5. Ключевые формулировки выделяй блоками:

```
ТЕХНИЧЕСКАЯ СИСТЕМА: ...
ИНСТРУМЕНТ: ...
ОБЪЕКТ: ...
СРЕДА: ...
НЕЖЕЛАТЕЛЬНЫЙ ЭФФЕКТ: ...

ПРОВЕРКА НА ЛОЖНОСТЬ:
1. Обходной путь: ДА/НЕТ — ...
2. Устарелость: ДА/НЕТ — ...
3. Глубинная причина: ДА/НЕТ — ...
4. Подмена средством: ДА/НЕТ — ...
5. Нулевое решение: ДА/НЕТ — ...

ЗАДАЧА ЛОЖНАЯ: ДА/НЕТ

ГЛАВНАЯ ФУНКЦИЯ: [инструмент] [глагол] [объект]

ЗАМЕНА ТЕРМИНОВ: [термин] → [простое слово], ...

МИНИ-ЗАДАЧА: ...
```
