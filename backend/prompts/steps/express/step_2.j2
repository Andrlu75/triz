{# step_2.j2 — Шаг 2: Поверхностное противоречие (ПП) #}
{# Переменные: user_input, problem_title, problem_description, previous_steps, previous_results #}

## Шаг 2 из 7: Поверхностное противоречие (ПП)

### Контекст задачи:
**Задача:** {{ problem_title | default("") }}
**Описание:** {{ problem_description | default("") }}

{% if previous_results %}
### Результаты предыдущих шагов:
{% if previous_results.task_formulation %}
**Формулировка задачи (Шаг 1):**
{{ previous_results.task_formulation }}
{% endif %}
{% if previous_results.main_function %}
**Главная функция:** {{ previous_results.main_function }}
{% endif %}
{% endif %}

{% if previous_steps %}
### Все предыдущие шаги:
{% for step in previous_steps %}
- **Шаг {{ step.step_code }}:** {{ step.validated_result | default(step.llm_output) }}
{% endfor %}
{% endif %}

### Дополнительный ввод пользователя:
{{ user_input | default("") }}

---

### Твоя задача на этом шаге:

**Поверхностное противоречие (ПП)** — это конфликт между потребностью и невозможностью её удовлетворить известными способами (правила 16–18).

**1. Выявление конфликта**
Определи:
- Что НУЖНО сделать / улучшить / получить?
- Что МЕШАЕТ / ограничивает / препятствует?

**2. Формулировка ПП по шаблону (правило 16)**
Запиши ПП по шаблону:
> «Нужно [потребность], НО [препятствие]»

Требования к формулировке:
- ПП должно отражать РЕАЛЬНЫЙ конфликт, а не надуманный (правило 17).
- В формулировке НЕ должно быть указания на способ решения (правило 18).
- Используй простые общепонятные слова (правило 15).

**3. Несколько вариантов**
Предложи 2–3 варианта формулировки ПП. Для каждого укажи:
- Формулировку
- Конфликтующие стороны (потребность vs препятствие)
- Почему этот вариант точно отражает суть проблемы

**4. Выбор лучшего варианта**
Выбери наиболее точную формулировку и обоснуй выбор.

---

### Формат ответа:

```
ВАРИАНТ ПП-1: Нужно ..., НО ...
  Потребность: ...
  Препятствие: ...
  Обоснование: ...

ВАРИАНТ ПП-2: Нужно ..., НО ...
  Потребность: ...
  Препятствие: ...
  Обоснование: ...

ВАРИАНТ ПП-3: Нужно ..., НО ...
  Потребность: ...
  Препятствие: ...
  Обоснование: ...

ВЫБРАННОЕ ПП: ...
ОБОСНОВАНИЕ ВЫБОРА: ...
```
