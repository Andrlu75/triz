{# full_analysis.j2 — Полный автоматический анализ задачи по АРИЗ (режим автопилота) #}
{# Переменные: user_input, problem_title, problem_description, domain #}

## Автоматический полный анализ задачи по АРИЗ-2010

### Задача:
**Название:** {{ problem_title | default("Не указано") }}
**Описание:** {{ problem_description | default("Не указано") }}
{% if domain %}
**Предметная область:** {{ domain }}
{% endif %}

{% if user_input %}
### Дополнительный ввод пользователя:
{{ user_input }}
{% endif %}

---

### Инструкция:

Проведи **полный автоматический анализ задачи** по методологии экспресс-АРИЗ (7 шагов). На каждом шаге строго следуй правилам АРИЗ-2010 (28 правил, 35 определений по книге В.Г. Петрова).

Работай полностью автономно. Если информации недостаточно для принятия решения — делай обоснованные допущения и явно помечай их: «ДОПУЩЕНИЕ: ...».

---

**ШАГ 1: ФОРМУЛИРОВКА ЗАДАЧИ**

1. Выдели элементы системы: техническую систему (ТС), инструмент, объект, среду.
2. Сформулируй главную функцию (ГФ) по правилам 4-11: «[инструмент] [глагол] [объект]».
   - Не подменяй функцию средством (правило 7).
   - Формулировка конкретная, одно действие (правило 8).
3. Проверь на ложность задачи (5 пунктов):
   - Обходной путь — можно ли решить иначе?
   - Устарелость — не существует ли уже решение?
   - Глубинная причина — не следствие ли это другой проблемы?
   - Подмена средством — описана потребность или конкретное средство?
   - Нулевое решение — можно ли убрать причину проблемы?
4. Замени специальные термины простыми словами (правило 15).
5. Запиши формулировку мини-задачи (правила 1-3): «ТС для [ГФ] включает [элементы]. Нежелательный эффект: [НЭ]. Необходимо устранить НЭ, сохранив ГФ.»

**ШАГ 2: ПОВЕРХНОСТНОЕ ПРОТИВОРЕЧИЕ (ПП)**

1. Сформулируй 2-3 варианта ПП (правила 12-14): «Нужно [потребность], НО [препятствие]».
   - ПП — это констатация конфликта, не рецепт (правило 12).
   - Формулируй на языке потребностей, не решений (правило 13).
2. Выбери наиболее точную формулировку, связанную с ГФ (правило 10).

**ШАГ 3: УГЛУБЛЁННОЕ ПРОТИВОРЕЧИЕ (УП)**

1. Определи конфликтующую пару: инструмент + объект (правила 5-6).
2. Определи конфликтующее свойство инструмента.
3. Запиши два варианта УП (правила 16-19):
   - УП-1: «Если [инструмент обладает свойством A], то [полезный эффект], НО [вредный эффект]».
   - УП-2: «Если [инструмент обладает свойством Б (анти-А)], то [вредный эффект устраняется], НО [полезный эффект теряется]».
4. Указать конкретные полезный и вредный эффекты (правило 16).

**ШАГ 4: ИДЕАЛЬНЫЙ КОНЕЧНЫЙ РЕЗУЛЬТАТ (ИКР)**

1. Сформулируй ИКР (правило 20): «[Элемент / X-элемент] САМ [выполняет нужное действие], НЕ вызывая [вредных эффектов] и НЕ усложняя систему».
2. Определи оперативную зону (ОЗ) — где возникает конфликт.
3. Определи оперативное время (ОВ) — когда возникает конфликт (Т1, Т2, Т3).
4. Сформулируй усиленный ИКР (правило 21): «[Элемент] В ПРЕДЕЛАХ [ОЗ] В ТЕЧЕНИЕ [ОВ] САМ ...»
5. Перечисли доступные ВПР: внутрисистемные, внешнесистемные, полевые, пространственные, временные, бесплатные.

**ШАГ 5: ОБОСТРЁННОЕ ПРОТИВОРЕЧИЕ (ОП)**

1. Сформулируй ОП (правило 22): «[Элемент в ОЗ] ДОЛЖЕН обладать свойством [S], чтобы [обеспечить ГФ], И ДОЛЖЕН обладать свойством [анти-S], чтобы [обеспечить ИКР]».
2. Проверь абсолютность требований — используется «ДОЛЖЕН», а не «желательно» (правило 22).
3. Проверь отсутствие компромисса — нет «золотой середины» (правило 24).
4. Проверь, что ОП для одного элемента (правило 23).
5. Усиль ОП: замени «ДОЛЖЕН» на «ОБЯЗАН», укажи предельные значения.

**ШАГ 6: УГЛУБЛЕНИЕ ОП**

1. Проанализируй ВПР в оперативной зоне (правило 26): приоритет — внутрисистемные, затем внешние.
2. Проанализируй 4 принципа разделения (правило 25):
   - A. В пространстве — S в одной зоне, анти-S в другой.
   - B. Во времени — S в один период, анти-S в другой.
   - C. В структуре (макро/микро) — S на одном уровне, анти-S на другом.
   - D. Системный переход — изменение надсистемы/подсистемы, фазовый переход, би-система.
3. Для каждого применимого принципа — конкретное предложение с указанием ВПР.
4. Предложи 2-3 направления разрешения ОП.

**ШАГ 7: РЕШЕНИЯ**

1. Предложи 2-3 конкретных решения. Для каждого укажи:
   - Описание (как именно решается задача).
   - Метод ТРИЗ: приём (номер и название из 50), стандарт (класс и номер из 76), эффект (какой).
   - Принцип разделения.
   - Задействованные ВПР.
2. Оцени каждое решение (1-10): новизна, реализуемость, идеальность, надёжность.
3. Проверь лучшее решение (правило 27): не усложняет систему, нет новых противоречий, использует ВПР, приближает к ИКР.
4. Обобщи опыт (правило 28): какое противоречие, каким инструментом устранено, области переноса.

---

### Формат ответа:

Для каждого шага выведи:

```
=============================================
ШАГ N: [НАЗВАНИЕ]
=============================================

[Результат анализа — подробно, со ссылками на правила]

КЛЮЧЕВАЯ ФОРМУЛИРОВКА: ...
```

В конце обязательно выведи **сводную таблицу решений**:

| # | Решение | Метод ТРИЗ | Принцип разделения | Новизна | Реализуемость | Идеальность | Надёжность | Средний балл |
|---|---------|-----------|-------------------|---------|---------------|-------------|------------|-------------|
| 1 | ... | ... | ... | X/10 | Y/10 | Z/10 | W/10 | .../10 |
| 2 | ... | ... | ... | X/10 | Y/10 | Z/10 | W/10 | .../10 |
| 3 | ... | ... | ... | X/10 | Y/10 | Z/10 | W/10 | .../10 |

**ПРОВЕРКА ЛУЧШЕГО РЕШЕНИЯ:**
- Не усложняет систему: ДА/НЕТ
- Нет новых противоречий: ДА/НЕТ
- Использует ВПР: ДА/НЕТ
- Приближает к ИКР: ДА/НЕТ

**ОБОБЩЕНИЕ:** [противоречие → инструмент → области переноса]

**ИТОГОВАЯ РЕКОМЕНДАЦИЯ:** Реализовать решение N в первую очередь, потому что ...
