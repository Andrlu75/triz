{# full_analysis.j2 — Полный автоматический анализ задачи по АРИЗ (режим автопилота) #}
{# Переменные: user_input, problem_title, problem_description, domain #}

## Автоматический полный анализ задачи по АРИЗ-2010

### Задача:
**Название:** {{ problem_title | default("Не указано") }}
**Описание:** {{ problem_description | default("Не указано") }}
{% if domain %}
**Предметная область:** {{ domain }}
{% endif %}

### Дополнительный ввод пользователя:
{{ user_input | default("") }}

---

### Инструкция:

Проведи **полный анализ задачи** по методологии экспресс-АРИЗ, последовательно выполнив все 7 шагов. На каждом шаге строго следуй правилам АРИЗ-2010 (28 правил, 35 определений).

---

**ШАГ 1: ФОРМУЛИРОВКА ЗАДАЧИ**
1. Выдели элементы системы: техническую систему, инструмент, объект, среду.
2. Сформулируй ГФ (правила 4–11): «[инструмент] [глагол] [объект]».
3. Проверь на ложность задачи (5 пунктов: обход, устарелость, глубина, подмена средством, нулевое решение).
4. Замени специальные термины (правило 15).
5. Запиши уточнённую формулировку мини-задачи (правила 12–14).

**ШАГ 2: ПОВЕРХНОСТНОЕ ПРОТИВОРЕЧИЕ (ПП)**
1. Сформулируй 2–3 варианта ПП (правила 16–18): «Нужно ..., НО ...».
2. Выбери наиболее точную формулировку.

**ШАГ 3: УГЛУБЛЁННОЕ ПРОТИВОРЕЧИЕ (УП)**
1. Определи конфликтующую пару (инструмент + объект).
2. Определи конфликтующее свойство.
3. Запиши два варианта УП (правило 19):
   - УП-1: «Если [свойство A], то [польза], НО [вред]».
   - УП-2: «Если [свойство B], то [вред устраняется], НО [польза теряется]».

**ШАГ 4: ИДЕАЛЬНЫЙ КОНЕЧНЫЙ РЕЗУЛЬТАТ (ИКР)**
1. Сформулируй ИКР (правило 20): «[Элемент] САМ ..., НЕ вызывая ... и НЕ усложняя систему».
2. Определи оперативную зону (ОЗ) и оперативное время (ОВ).
3. Сформулируй усиленный ИКР (правило 21).
4. Перечисли доступные ВПР.

**ШАГ 5: ОБОСТРЁННОЕ ПРОТИВОРЕЧИЕ (ОП)**
1. Сформулируй ОП (правило 22): «[Элемент] ДОЛЖЕН [S] И ДОЛЖЕН [анти-S]».
2. Проверь абсолютность (правило 23) и отсутствие компромисса (правило 24).
3. Усиль ОП.

**ШАГ 6: УГЛУБЛЕНИЕ ОП**
1. Проанализируй ВПР в зоне конфликта.
2. Проанализируй 4 принципа разделения: пространство, время, структура, системный переход (правило 25).
3. Предложи 2–3 направления разрешения ОП.

**ШАГ 7: РЕШЕНИЯ**
1. Предложи 2–3 конкретных решения.
2. Для каждого укажи: метод ТРИЗ (приём/стандарт/эффект), принцип разделения, ВПР.
3. Оцени каждое решение: новизна, реализуемость, идеальность, надёжность (1–10).
4. Проверь лучшее решение (правило 27): не усложняет ли систему, нет ли новых противоречий.
5. Обобщи (правило 28).

---

### Формат ответа:

Для каждого шага выведи:

```
═══════════════════════════════════════
ШАГ N: [НАЗВАНИЕ]
═══════════════════════════════════════

[Результат анализа]

КЛЮЧЕВАЯ ФОРМУЛИРОВКА: ...
```

В конце обязательно выведи **сводную таблицу решений**:

```
╔════════════╦═══════════════╦══════════╦════════════════╦═════════════╦═════════════╗
║ Решение    ║ Метод ТРИЗ    ║ Новизна  ║ Реализуемость  ║ Идеальность ║ Надёжность  ║
╠════════════╬═══════════════╬══════════╬════════════════╬═════════════╬═════════════╣
║ Решение 1  ║ ...           ║ X/10     ║ Y/10           ║ Z/10        ║ W/10        ║
║ Решение 2  ║ ...           ║ X/10     ║ Y/10           ║ Z/10        ║ W/10        ║
║ Решение 3  ║ ...           ║ X/10     ║ Y/10           ║ Z/10        ║ W/10        ║
╚════════════╩═══════════════╩══════════╩════════════════╩═════════════╩═════════════╝
```

**ИТОГОВАЯ РЕКОМЕНДАЦИЯ:** ...
